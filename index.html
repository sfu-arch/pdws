<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Path Derived Workload Suite by sfu-arch</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Path Derived Workload Suite</h1>
        <p>Path Derived Workload Suite</p>

        <p class="view"><a href="https://github.com/sfu-arch/pdws">View the Project on GitHub <small>sfu-arch/pdws</small></a></p>


        <ul>
          <li><a href="https://github.com/sfu-arch/pdws/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/sfu-arch/pdws/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/sfu-arch/pdws">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="path-derived-workload-suite-10" class="anchor" href="#path-derived-workload-suite-10" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Path Derived Workload Suite 1.0</h1>

<p>A workload suite for accelerators derived from microprocessor workloads by identifying and isolating, recurrent and acceleratable behaviour. </p>

<h2>
<a id="contents" class="anchor" href="#contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contents</h2>

<p>This repository contains LLVM bitcode distributed as part of the Path Derived Workload Suite [1]. The bitcode has been compiled for a x86_64 system using LLVM 3.8.1 [2]. Each bitcode file is self-contained, i.e all the source has been compiled to bitcode and linked together. There are no external dependencies. Each workload has 5 different bitcode files. Each bitcode contains one <code>path</code> outlined as a function in the form <code>__offload_func_XXX</code> where <code>XXX</code> is the Ball-Larus path id of interest.</p>

<h2>
<a id="directory-structure" class="anchor" href="#directory-structure" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Directory Structure</h2>

<pre><code>x86_64  
\-- sw_undo
\-- hw_undo  
\-- tools  
    \-- pin  
</code></pre>

<h2>
<a id="execution-model" class="anchor" href="#execution-model" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Execution Model</h2>

<p>An acyclic path through a control flow graph spans across one more branches. Deviation from the outlined path requires the restoration of program state and re-execution.</p>

<p>Guard Checks :<br>
Checks to ensure correct path execution are implemented as branches. If a guard check fails the function immediately returns false. Successful execution of the outlined path returns true.</p>

<p>Software Undo :<br>
Memory state modifications are saved in an undo log global variable during the execution of the workload. If any guard condition in the outlined path evaluates to false, the memory state is restored using a software undo runtime. </p>

<p>Hardware Undo :<br>
There is <em>no</em> software support for undoing changes to memory state. This version of the bitcode assumes the presence of a hardware store commit buffer. The contents of the buffer are only flushed to memory on the successful completion of the path. A use case for this bitcode is on architectural simulators. This version of bitcode has undefined behaviour without hardware undo support.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<ol>
<li><p>Pre-Requisites : Please download LLVM 3.8.1 binaries from [2].</p></li>
<li><p>Compile to x86_64 binary  </p></li>
</ol>

<pre><code>$ clang x86_64/sw_undo/164.gzip/20.bc -o 164.gzip
</code></pre>

<ol>
<li>Human readable bitcode format</li>
</ol>

<pre><code>$ llvm-dis x86_64/sw_undo/164.gzip/20.bc -o 164.gzip.ll
</code></pre>

<ol>
<li>Pintool : Requires Pin Rev 71313</li>
</ol>

<pre><code>$ export PIN_HOME=your/pin/install/dir
$ make -C tools/pin 
$ pin -t tools/pin/obj-intel64/MyPintool.so -- 164.gzip
</code></pre>

<h2>
<a id="note--overlapping-paths" class="anchor" href="#note--overlapping-paths" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Note : Overlapping Paths</h2>

<p>In some cases the top five paths include paths which overlap in part or a path is subsumed in another. In these cases the execution model may not correctly indicate the execution of the intended path due to the greedy nature in which it is invoked. A list of paths where this is observed is provided in info/overlap.txt with the severity of the observed issue. For these paths the recommended approach is to independently account of the execution of the individual paths by ignoring the return type of the offload function.</p>

<h2>
<a id="info-files" class="anchor" href="#info-files" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Info Files</h2>

<pre><code>info
\-- idmap.txt : Mapping of path id to path rank   
\-- overlap.txt : List of overlapping paths affected by execution model 
</code></pre>

<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>References</h2>

<p>[1] SPEC-AX and PARSEC-AX: Extracting Accelerator Benchmarks from Microprocessor Benchmarks<br>
Snehasish Kumar, William N. Sumner, Arrvindh Shriraman (Simon Fraser University) 
[2] <a href="http://llvm.org/releases/download.html">http://llvm.org/releases/download.html</a> 
[3] Ball, Thomas, and James R. Larus. "Efficient path profiling." Proceedings of the 29th annual ACM/IEEE international symposium on Microarchitecture. IEEE Computer Society, 1996.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/sfu-arch">sfu-arch</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
